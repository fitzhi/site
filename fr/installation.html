<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-158908694-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-158908694-1');
    </script>

    <title>Fitzhì : Quality IT assets portal and skills management</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="author" content="Frédéric VIDAL @Fitzhì" />
    <meta name="description" content="Fitzhì aims to gather all technical data regarding your application portfolio into ONE single portal." />
    <meta name="keywords" content="Open Source Skills Management software" />

	<!-- CSS only -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" 
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />

	<script defer src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" 
		integrity="sha384-rOA1PnstxnOBLzCLMcre8ybwbTmemjzdNlILg8O7z1lUkLXozs4DHonlDtnE7fpc" 
		crossorigin="anonymous">
	</script>

    <!-- Favicons -->
    <link rel="icon" href="/assets/img/zhi.png" sizes="32x32" type="image/png" />
    <link rel="icon" href="/assets/img/zhi.png" sizes="16x16" type="image/png" />
    <link rel="icon" href="/assets/img/zhi.ico" />
    <meta name="theme-color" content="#563d7c" />

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>
    <!-- Custom styles for this template -->
    <link href="/fitzhi.css" rel="stylesheet" />
    <link href="/fedora.css" rel="stylesheet" />

	<!-- Custom javascript -->
	<script src="/fitzhi.js" crossorigin="anonymous"></script>

</head>

<body class="article">
    <h1 style="visibility: hidden; height: 20px">Presentation of Fitzhì, Single Point Of Contact for all quality IT metrics</h1>
    <div id="content" >
<style>
	.dropdown-toggle::after {
		content: none;
	}
</style>
<nav class="navbar navbar-light navbar-expand-md fixed-top p-1 p-sm-3 bg-white">

	<a class="navbar-brand" href="./index.html">
		<span class="gradient logo-small">质 Fitzhì</span>
	</a>

	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigationMenus"
		aria-expanded="false" 
		aria-controls="navbarsExampleDefault"
		aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>


	<div class="collapse navbar-collapse" id="navigationMenus">

		<ul class="navbar-nav mr-auto">

			<li id="menuHome" class="nav-item">
				<a class="nav-link text-secondary" href="./index.html">Accueil</a>
			</li>

			<li class="nav-item dropdown">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" 
					role="button" data-bs-toggle="dropdown" aria-expanded="false">
					Application
				  </a>
				  <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
					<li><a class="dropdown-item" href="./installation.html">Installation</a></li>
					<li><a class="dropdown-item" href="./architecture.html">Architecture</a></li>
					<li><a class="dropdown-item" href="./getting-started.html">Getting started</a></li>
				</ul>
			</li>

			<li class="nav-item">
				<a class="nav-link text-secondary" href="./contact.html">Contact</a>
			</li>

			<li class="nav-item">
				<a class="nav-link text-secondary" href="./evaluate.html">Test</a>
			</li>

			<li class="d-flex d-md-none nav-item">
				<a class="nav-link text-secondary" href="#" onClick="redirect();">English</a>
			</li>

		</ul>

		<div class="d-none d-md-flex position-absolute mx-2 end-0">
			<a href="#" onClick="redirect();">
				<img class="logo-country" src="../img/uk.png" ></img>
			</a>
		</div>


	</div>


</nav>
<div class="sect1">
<h2 id="_installation_of_fitzhi">INSTALLATION OF FITZHI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are currently 3 ways to install Fitzhì on your environments.</p>
</div>
<div class="sect2">
<h3 id="_using_fitzhi_in_a_docker_container">USING FITZHI IN A DOCKER CONTAINER</h3>
<div class="paragraph">
<p>The easiest way to install Fitzhi is to use a preinstalled version of Fitzhi inside a Docker container.</p>
</div>
<div class="paragraph">
<p>You can download a container directly from <a href="http://hub.docker.com/u/fitzhi/" class="bare" target="_blank" rel="noopener">http://hub.docker.com/u/fitzhi/</a>.
The current tag is 1.7.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">docker pull fitzhi/application:1.7</code></pre>
</div>
</div>
<div class="paragraph">
<p>The container provides :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a <code>Java</code> <code>Spring</code> Rest server</p>
</li>
<li>
<p>an <code>Angular</code> application</p>
</li>
<li>
<p>an <code>nginx</code> instance</p>
</li>
<li>
<p>a <code>Git</code> client</p>
</li>
</ul>
</div>
<div class="paragraph text-justify">
<p>Fitzhi might be linked with your Sonar server, if any. This component is not mandatory for the proper functioning of fitzhi
Sonar server is considered a useful source of information to assess the quality of projects.
If you want to link the container with your Sonar instance, you has to provide some connection settings at startup.
These settings will allow the <code>reverse-proxy</code> deployed in the container to access your Sonar server <span class="underline">from inside</span>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">RESOLUTION OF THE SONAR URL</div>
<div class="paragraph text-justify">
<p>The URL given to the container must be resolvable from inside the environment that will host the application. If you test Fitzhi from your local machine and the URL <a href="https://mysonar:9000" class="bare">https://mysonar:9000</a> is reachable from there, then you can pass this url. Otherwise check that the destination of the container will resolve the given url.<br/>
The container currently does only support <strong>one</strong> Sonar server. Please install Fitzhi on your local environments if you have multiple Sonar servers in your IT.</p>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>The parameters are :</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">urlSonarServer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL where the Sonar server is deployed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">login</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The recommended authentification credential : the Sonar token login. This token has been generated by the Sonar security module.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The alternative connection mode :<br/>
The basic authentication credential : user/password.<br/>
This user is required to be identified by Sonar. Default is "admin"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password required to be identified by Sonar.<br/>
This property is mandatory if the connection mode is the user/password mode.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Fitzhi shares its internal deployment directory <code>/fitzhi/deploy/</code> with your host machine.<br/>
This directory contains the server, the settings and the referential and application data of Fitzhì<br/>
You should first create a volume to store the Fitzhi data.<br/>
The content of the volume is described <a href="#_deployment_description">here</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">docker volume create fitzhi-data</code></pre>
</div>
</div>
<div class="paragraph">
<p>To start the application in the Sonar recommended way, you just can type :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">docker run --name fitzhi \
-e "urlSonarServer=http://yourSonarHostname:9000" \
-e "login=youLoginTokenToSonar" \
-v fitzhi-data:/fitzhi/deploy/ \
-p 80:80 -d --rm fitzhi/application:1.7</code></pre>
</div>
</div>
<div class="paragraph">
<p>To start the application in an alternative way, you can type :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">docker run --name fitzhi \
-e "urlSonarServer=http://yourSonarHostname:9000" \
-e "user=youSonarUser" \
-e "password=yourSonarPassword" \
-v fitzhi-data:/fitzhi/deploy/ \
-p 80:80 -d --rm fitzhi/application:1.7</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installation_on_your_local_environments">INSTALLATION ON YOUR LOCAL ENVIRONMENTS</h3>
<div class="sect3">
<h4 id="_installation_of_the_backend_server">INSTALLATION OF THE BACKEND SERVER</h4>
<div class="paragraph">
<p>To deploy the backend on a local server, you first have to download the archive of Fitzhì.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl https://spoq.fitzhi.com/release/back-fitzhi.zip --output deploy.zip
tar xvf deploy.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>To start the server, you just have to type :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd ./deploy/backend-fitzhi/
java -Xmx1g -jar fitzhi.jar --spring.profiles.active=HTTP</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The Backend server will listen by default the port number <code>8080</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
To check the server status, and verify that the server has been successfully launched, just visit the url <a href="http://localhost:80/api/test/ping" class="bare" target="_blank" rel="noopener">http://localhost:80/api/test/ping</a> , or <a href="http://hostname:80/api/test/ping" class="bare">http://hostname:80/api/test/ping</a> <br/>
A text <strong>Pong</strong> response is expected.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_installation_of_the_frontend_server">INSTALLATION OF THE FRONTEND SERVER</h4>
<div class="paragraph">
<p>The Angular project has to be downloaded. A local webserver is necessary to publish the application.<br/>
Our documentation proposes the use of <code>nginx</code> for this task, among others.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl https://spoq.fitzhi.com/release/front-fitzhi.zip --output spoq.zip
mkdir spoq
cd spoq
tar xvf ../spoq.zip</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Your internet browser will have to handle 2 servers simultaneously.<br/>
Therefore your will face some CORS issues. So please read the chapter related to the configuration of NGINX.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_build_and_installation_on_your_local_environments"><strong>BUILD</strong> AND INSTALLATION ON YOUR LOCAL ENVIRONMENTS</h3>
<div class="paragraph">
<p>First you need to export the GitHub repository.</p>
</div>
<div class="listingblock">
<div class="title">Download the source of Fitzhì</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">git clone https://www.github.com/fitzhi/application.git
rm -rf .git</code></pre>
</div>
</div>
<div class="paragraph">
<p>A directory Application will be downloaded with this content :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>front-fitzhi (the Angular front-end project)</p>
</li>
<li>
<p>back-fitzhi  (the Spring back-end project)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_building_the_backend_server">BUILDING THE BACKEND SERVER</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">The building script requires the following prerequisites</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Java 11 or higher</p>
</li>
<li>
<p>Maven 3 or higher</p>
</li>
<li>
<p>Git 2 or higher installed on the backend server</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The build of the backend is very simple. Just type :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd application
./init.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>To start the back-end of Fitzhì, just type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./run.sh HTTP (or HTTPS)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To test if the server is correctly started, just visit the url <a href="http://localhost:8080/api/test/ping" class="bare" target="_blank" rel="noopener">http://localhost:8080/api/test/ping</a> , or <a href="http://hostname:8080/api/test/ping" class="bare">http://hostname:8080/api/test/ping</a> <br/>
A <strong>Pong</strong> response is expected.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_building_the_frontend_client">BUILDING THE FRONTEND CLIENT</h3>
<div class="paragraph">
<p>The easiest installation involved no-installation.<br/>
The last stable release of front-fitzhì is available here <a href="https://fitzhi.github.io/spoq" class="bare" target="_blank" rel="noopener">https://fitzhi.github.io/spoq</a>.<br/>
This URL hosts only a static web server which delivers JS files. So just go there.</p>
</div>
<div class="paragraph">
<p>If you prefer to deploy the front-end on-premise, like any other Angular application.<br/>
Just type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd front-fitzhi
npm install
ng build --prod</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <strong>dist</strong> (by default) directory will be created.<br/>
Just copy everything within the output folder to a folder on your server.
For more precision, just RTFM, <a href="https://angular.io/guide/deployment" class="bare">https://angular.io/guide/deployment</a></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Your internet browser will have to handle 2 servers simultaneously.
Therefore your will face some CORS issues. So read the chapter further on the subject of CORS.
</td>
</tr>
</table>
</div>
<div class="paragraph text-justify">
<p>You can copy the deploy directory on a remote server, or leave it, on your machine, for testing purpose.
The back-end URL, therefore, will be <a href="http://localhost:8080" class="bare">http://localhost:8080</a> if you start the server in HTTP mode, and
<a href="http://localhost:8443" class="bare">http://localhost:8443</a> in HTTPS mode.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_brower_and_the_cors_issue">THE BROWER AND THE CORS ISSUE</h2>
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
First of all, you do not have to read this chapter if you are using the Docker container.
The reverse-proxy is already pre-installed and pre-configured.
</td>
</tr>
</table>
</div>
<div class="paragraph text-justify">
<p>If you are not familiar with the mechanism of CORS, you can refer to <a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing" target="_blank" rel="noopener">this simple presentation</a>.<br/>
This protection feature is activated inside your browser, when your executes multiple cross-domain requests.<br/>
With Fitzhì, you have 2 cross domain sources.</p>
</div>
<div class="paragraph">
<p>Therefore you might have to configure 3 types of servers.
* the HTTP server of the Angular application
* the backend of Fitzhì
* The Sonar server(s) available on your network.</p>
</div>
<div class="paragraph text-justify">
<p>The software <code>NGINX</code> is not a prerequisite, you can use either <code>Apache</code>, or <code>Haproxy</code>, or any other solution as well. The procedure below is just limited to NGINX.</p>
</div>
<div class="paragraph text-justify">
<p>First you need to download <a href="http://nginx.org/en/docs/njs/index.html" target="_blank" rel="noopener">NGINX</a> and follow the instuctions.</p>
</div>
<div class="paragraph text-justify">
<p>After the installation, the configuration is very simple. Depending on your distribution, you might have to configure the <strong>nginx.conf</strong> file, or the <strong>default</strong> file as below.</p>
</div>
<div class="paragraph">
<p><strong>3 entries have to be declared :</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>the full path of the Angular distribution files</p>
</li>
<li>
<p>the URL behind which the backend server will be reachable</p>
</li>
<li>
<p>The URL behind which your Sonar server is reachable from your environment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With these settings, your appplication will be available at <a href="http://localhost:8081" class="bare">http://localhost:8081</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">server {
	listen       8081;
	server_name  localhost;

	location / {
		root   /the/path/to/your/application/dir;
		index  index.html index.htm;
	}

	location /api {
		  proxy_pass http://localhost:8080;

		  proxy_set_header Host $http_host;
		  proxy_set_header X-Real-IP $remote_addr;
		  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		  proxy_set_header X-Forwarded-Proto $scheme;

		  # When we create new entitiy like 'project',the API returns a 201 response with a 'location' header
		  # We add this setting to ensure that the https scheme is present in the response
		  # cf. http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_redirect
		  proxy_redirect http://$host https://$host;

		  # These 3 settings are set to enable the event-stream flow from the server
		  # https://stackoverflow.com/questions/13672743/eventsource-server-sent-events-through-nginx
		  proxy_set_header Connection '';
		  proxy_http_version 1.1;
		  chunked_transfer_encoding off;
	}

	location ~ ^/sonar/(.+) {
		# We rewrite and remove the sonar directory in the path.
		rewrite ^/sonar/(.+)$ /$1 break;

		proxy_pass http://localhost:9000;

		proxy_set_header Host $http_host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto $scheme;
	}
}</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
The sonar-servers.json file contains the list of all Sonar servers available on your network. This file is hosted on the Fitzhi backend server. It should contain the URL(s) of the Sonar instance(s) FROM THE PERSPECTIVE OF THE WEB BROWSER. In the case above, your Sonar server will be declared at <a href="http://localhost:8081/sonar" class="bare">http://localhost:8081/sonar</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deployment_description">DEPLOYMENT DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The backend solution is composed of these directories.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Directory</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Main deployment directory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploy/backend-fitzhi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This directory contains executable <code>fitzhi.jar`</code> and the <code>application.properties</code> file.<br/>
Specific settings for fitzhi are declared in this file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploy/data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The data store of fitzhì</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploy/data/application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The data directories where your corporate data will be stored (e.g. staff.json, project.json &amp; skill.json).<br/>
All of your updates will be stored there.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploy/data/referential</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The referential data which contains the static data used by the application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploy/data/repos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The directory which contains all local GIT repositories</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploy/docker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The files necessary for the container to run correctly.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
        <!-- end of DIV with ID = "content" -->
       </div>
       <br/>
       <div class="my-footer">
            <table width="100%">
                <tr>
                    <td align="left">&nbsp;&nbsp;&nbsp;&copy; Fitzhì 2022</td>
                    <td align="right">Concerning this site, please contact <a href="mailto://webmaster@fitzhi.com">the webmaster</a>&nbsp;&nbsp;&nbsp;</td>
                </tr>
            </table>
        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            crossorigin="anonymous">
        </script>

    </body>

</html>